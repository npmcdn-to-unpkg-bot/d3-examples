<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>D3-examples by minhui-zh</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">D3-examples</h1>
      <h2 class="project-tagline">Data visualization samples implemented by d3.js.</h2>
      <a href="https://github.com/minhui-zh/d3-examples" class="btn">View on GitHub</a>
      <a href="https://github.com/minhui-zh/d3-examples/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/minhui-zh/d3-examples/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="d3-examples" class="anchor" href="#d3-examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>d3-examples</h1>

<p>Data visualization samples implemented by d3.js.</p>
<iframe>
  <!DOCTYPE html>
<meta charset="utf-8">
  <style>
    .links line {
      stroke: #999;
      stroke-opacity: 0.6;
    }
    .nodes circle {
      stroke: #fff;
      stroke-width: 1.5px;
    }
  </style>
  <svg width="960" height="600"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
  <script>
    var svg = d3.select("svg"),
        width = +svg.attr("width"),
        height = +svg.attr("height");
    // construct a new ordinal scale and a categorical scheme with 20 colors
    var color = d3.scaleOrdinal(d3.schemeCategory20);

    // create a force simulation, if nodes is not specified, it defaults to the empty array
    var simulation = d3.forceSimulation()
        .force("link",d3.forceLink().id(function(d){return d.id;}))
        .force("charge",d3.forceManyBody())
        .force("center", d3.forceCenter(width/2, height/2));
    // load data
    d3.json("data/miserables.json", function(error, graph){
      if(error) throw error;
      // define links
      var link = svg.append("g")
          .attr("class","links")
          .selectAll("line")
          .data(graph.links)
          .enter().append("line")
          .attr("stroke-width", function(d){ return Math.sqrt(d.value); });
      // define nodes, create a drag behavior
      var node = svg.append("g")
      .attr("class","nodes")
      .selectAll("circle")
      .data(graph.nodes)
      .enter().append("circle")
        .attr("r", 5)
        .attr("fill", function(d) { return color(d.group); })
        .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end",dragended));

      node.append("title")
        .text(function(d) { return d.id; });

      // initialize nodes position
      simulation
        .nodes(graph.nodes)
        .on("tick", ticked);
      // 
      simulation.force("link")
        .links(graph.links);

      function ticked() {
        link
          .attr("x1", function(d) {return d.source.x; })
          .attr("y1", function(d) {return d.source.y; })
          .attr("x2", function(d) {return d.target.x; })
          .attr("y2", function(d) {return d.target.y; });
        node
          .attr("cx", function(d) {return d.x; })
          .attr("cy", function(d) {return d.y; });
      }
    });

    function dragstarted(d) {
      if(!d3.event.active) simulation.alphaTarget(0.3).restart();
      d.fx = d.x;
      d.fy = d.y;
    }

    function dragged(d) {
      d.fx = d3.event.x;
      d.fy = d3.event.y;
    }

    function dragended(d) {
      if(!d3.event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }

    console.log("d3 starts.")
  </script>
  </html>
  </iframe>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/minhui-zh/d3-examples">D3-examples</a> is maintained by <a href="https://github.com/minhui-zh">minhui-zh</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
